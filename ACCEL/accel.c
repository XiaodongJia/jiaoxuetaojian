/*
 * accel.c
 *
 *  Created on: 2014年9月14日
 *      Author: lenovo
 */

#include "msp430.h"
#include <string.h>
#include "driverlib.h"
#include "HAL_PMM.h"

// USB API #includes
#include "USB_config/descriptors.h"
#include "USB_API/USB_Common/device.h"
#include "USB_API/USB_Common/types.h"
#include "USB_API/USB_Common/usb.h"
#include "USB_API/USB_CDC_API/UsbCdc.h"
#include "USB_app/usbConstructs.h"

// Application #includes
#include "BCUart.h"           // Include the backchannel UART "library"
#include "hal.h"              // Modify hal.h to select your hardware
#include "TFT_Screen.h"
#include "key.h"
#include "math.h"
#include "bt.h"
#include "delay.h"
#include "accel.h"
#include "ADC12.h"
#include "heartrate.h"

static const unsigned char Ahan[4][128] = {
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x07,0x00,0xC0,0xFF,0x0F,0x00,0x00,0x07,0x18,0x18,0x00,0x04,0x30,0x18,0x00,0x08,0x20,0x1C,0x30,0x00,0x40,0x0C,0x70,0x80,0x00,0x04,0xF0,0x80,0x01,0x04,0xE0,0x83,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x20,0x00,0x00,0xF8,0x3F,0x00,0x00,0x78,0x20,0x00,0x00,0x18,0x60,0x00,0x00,0x18,0x60,0x00,0x00,0x18,0x60,0x00,0x00,0x1C,0x60,0x00,
 0x00,0xFE,0xFF,0x00,0x00,0x38,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x40,0x18,0x00,0x00,0x60,0x18,0x00,0x00,0x30,0x38,0x00,0x00,0x1C,0x60,0x00,0x00,0x1C,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"总",0*/

 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x38,0x60,0x00,0x00,0x3C,0x10,0x00,0x10,0x7C,0x08,0x00,0x1C,0x0E,0x0C,0xF0,0x17,0x06,0x06,0x20,0x10,0x06,0x03,0x30,0x10,0x06,0x01,0x30,0x30,0x82,0x01,0x30,0x30,0x83,0x00,0x38,0x30,0xC3,0x00,0x38,0x30,0xC3,0x00,0x3C,0x3E,0x63,0x00,0xF8,0x41,0x63,0x0E,0x20,0x80,0xE3,0x1F,
 0x00,0x80,0x3F,0x00,0x00,0x00,0x33,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"加",0*/

 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0xE0,0x0F,0x00,0x00,0xFC,0x7F,0x00,0x00,0x00,0xF8,0x07,0x00,0x00,0x20,0x3E,0x3C,0x00,0x20,0xE0,0x0F,0x00,0x60,0x30,0x01,0x00,0x20,0x88,0x01,0x80,0x20,0x86,0x01,0x80,0x23,0x03,0x01,0x00,0xA7,0x01,0x03,0x00,0xFC,0x00,0x02,0x00,0x60,0x00,0x02,0x00,0xE0,0x03,0x03,0x00,0x7F,0x86,0x3F,0x00,0x21,0x84,0x07,0x80,0x21,0x04,0x00,0x80,0xE1,0x0F,0x00,
 0xC0,0x3F,0x00,0x00,0x00,0x21,0x00,0x00,0x00,0xA0,0x67,0x00,0x00,0xFF,0xE1,0x00,0x00,0x27,0xC0,0x01,0x00,0x20,0x00,0x03,0x00,0x20,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"速",1*/

 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x01,0x40,0x00,0xF8,0x07,0x38,0x20,0x80,0x0F,0x0E,0x10,0x00,0x9C,0x03,0x08,0x00,0xF0,0x00,0x04,0x00,0xE0,0x00,0x06,0x00,0xB0,0x01,0x02,0x00,0x30,0x03,0x03,0x00,0x18,0x06,0x01,0x00,0x18,0x84,0x01,0x00,0xDC,0x87,0x01,0x00,0x3C,0x80,0x00,0x00,0x00,0xC0,0x00,0x00,0xC0,0xC3,0x00,0x00,0x38,0xC2,0x00,0x00,0x10,0xC2,0x00,0x00,0x98,0x5F,0x00,0x00,0xFF,0x46,0x00,
 0xC0,0x0B,0x46,0x00,0x00,0x08,0x64,0x00,0x00,0x1C,0x60,0x00,0x00,0x00,0x7F,0x00,0x00,0xFC,0x01,0x00,0x00,0x1F,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0xE0,0x00,0x00,0x00,0xC0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"度",2*/
 };

static const unsigned char Ahan1[5][64] = {
		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x70,0x1C,0x70,0x18,0x38,0x38,0x18,0x30,0x1C,0x70,0x0C,0x60,0x0E,0xE0,0x06,0xC0,0x07,0xC0,0x03,0x80,0x03,0x80,0x03,0xC0,0x03,0xC0,0x07,0xE0,0x0E,0x70,0x0E,0x70,0x1C,0x38,0x1C,0x38,0x38,0x1C,0x38,0x1C,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"X",0*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0x80,0x03,0xC0,0x03,0xC0,0x07,0xE0,0x06,0x60,0x0E,0x70,0x0C,0x30,0x1C,0x38,0x1C,0x18,0x38,0x1C,0x38,0x0C,0x70,0x0E,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"Y",1*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x7F,0xFE,0x7F,0x00,0x70,0x00,0x38,0x00,0x1C,0x00,0x1C,0x00,0x0E,0x00,0x0E,0x00,0x07,0x80,0x03,0x80,0x03,0xC0,0x01,0xC0,0x00,0xE0,0x00,0x70,0x00,0x70,0x00,0x38,0x00,0x18,0x00,0x1C,0x00,0xFC,0x3F,0xFC,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"Z",2*/

		{0xE0,0x0F,0xF8,0x3F,0x1C,0x70,0x0C,0x70,0x0C,0x30,0xFC,0x1F,0xF8,0x1F,0x00,0x3C,0x00,0x30,0x80,0x37,0xE0,0x0F,0x70,0x1C,0x30,0x18,0x30,0x38,0x30,0x38,0x30,0x18,0x70,0x1C,0xFE,0x0F,0x8E,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"g",3*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0xF0,0x0F,0xF8,0x1F,0x3C,0x38,0x1C,0x78,0x0C,0x70,0x0C,0x70,0x1C,0x00,0x1C,0x00,0x7C,0x00,0xF8,0x00,0xE0,0x07,0xC0,0x0F,0x00,0x1E,0x00,0x3C,0x00,0x38,0x1C,0x38,0x1C,0x38,0x38,0x38,0x78,0x3C,0xF0,0x1F,0xE0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"S",0*/

};

static const unsigned char Ahan2[3][128] = {
		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x80,0x00,0x00,0x38,0x60,0x00,0x01,0x70,0x30,0x00,0x01,0xE0,0x18,0x00,0x03,0x80,0x09,0x00,0x03,0x00,0x0C,0x00,0x01,0x00,0x24,0x18,0x01,0x20,0x66,0x98,0x01,0x30,0x66,0x9C,0x01,0x30,0x26,0x9E,0x01,0x30,0x26,0x89,0x41,0x30,0xA6,0x88,0x21,0x20,0x26,0x88,0x11,0x20,0x27,0x88,0x09,0x20,0x26,0x88,0x0D,0x20,0x20,0x08,0x07,0x70,0x7C,0x0F,0x02,
		0xE0,0x8B,0x09,0x03,0x40,0x0C,0x88,0x01,0x00,0x04,0x98,0x01,0x00,0x06,0xC0,0x00,0x00,0x7C,0xC0,0x00,0xE0,0x1F,0xE0,0x00,0xF8,0x00,0xE0,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"倾",4*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x80,0x03,0x00,0x06,0x80,0x87,0x00,0x03,0x80,0x8F,0x80,0x01,0x80,0x81,0x80,0x00,0x80,0x81,0xC0,0x00,0x80,0x81,0xC0,0x00,0x80,0x81,0x40,0x00,0x80,0xC1,0x5F,0x00,0x80,0xF9,0x61,0x00,0x80,0x81,0x61,0x00,0x80,0x81,0x61,0x00,0x80,0x81,0x65,0x00,0x80,0xE1,0x67,0x00,0x80,0xF9,0x61,0x00,0x80,0x81,0x61,0x00,0x80,0x81,0x61,0x00,0x80,0x81,0x7F,0x00,
		0x80,0xFF,0x01,0x00,0x00,0xCE,0x80,0x00,0x00,0x60,0x40,0x00,0x00,0x30,0x30,0x00,0x00,0x18,0x18,0x00,0x00,0x1E,0x0C,0x00,0x00,0xFF,0x0F,0x00,0x00,0x0C,0x07,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"角",5*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0xC0,0x03,0x00,0x00,0x60,0x06,0x00,0x00,0x20,0x0C,0x00,0x00,0x20,0x08,0x00,0x00,0x20,0x0C,0x00,0x00,0x20,0x04,0x00,0x00,0xC0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"°",0*/

};

static const unsigned char Ahan3[6][128] = {
		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x7C,0x00,0x0C,0x00,0xF0,0x00,0x03,0x00,0xC0,0x81,0x01,0x38,0x80,0xC1,0x00,0x7E,0x00,0xC3,0x80,0x07,0x00,0x66,0xE0,0x04,0x00,0x24,0xD8,0x04,0x00,0x38,0xC0,0x0C,0x00,0x30,0xC0,0x0C,0x00,0x90,0xC3,0x0C,0x00,0xFE,0xFF,0x1C,0xE0,0x1F,0xC0,0x00,0x00,0x18,0xC0,0x00,0x00,0x18,0xC4,0x00,0x00,0x18,0xC3,0x03,0x00,0xFE,0x71,0x02,
		0x80,0x9F,0x31,0x06,0x00,0xD8,0x31,0x06,0x00,0xD8,0x10,0x0C,0x00,0x18,0xB8,0x0F,0x00,0x18,0x78,0x00,0x00,0x18,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x1C,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"跌",0*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0xF0,0x00,0x00,0x03,0x30,0x01,0x00,0x03,0x30,0x00,0x38,0x03,0x30,0x00,0x7F,0x03,0x30,0xE0,0x03,0x03,0x30,0x18,0x01,0x01,0x30,0x00,0x01,0x01,0x30,0x00,0x1D,0x01,0x30,0xC2,0x07,0x01,0x30,0xF2,0x01,0x01,0x30,0x03,0x01,0x21,0x30,0x83,0x11,0x11,0x30,0x13,0x1F,0x19,0x30,0xF3,0x1F,0x0D,0x30,0x33,0x0C,0x06,0x30,0x63,0x04,0x06,
		0x30,0x43,0x02,0x03,0x30,0x06,0x03,0x03,0x30,0x00,0x8B,0x01,0x30,0x80,0x9F,0x01,0x30,0xF0,0xC1,0x00,0x30,0x00,0xE0,0x00,0x70,0x00,0xE0,0x00,0x60,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"倒",1*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0xE0,0x00,0x00,0x00,0xC0,0x01,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,
		0x00,0x0C,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x03,0x00,0x00,0x80,0x03,0x00,0x00,0xC0,0x01,0x00,0x00,0xE0,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"（",2*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x1C,0x00,0x08,0x18,0xF8,0x80,0x0B,0x3C,0xE0,0xE1,0x08,0x0F,0x80,0x33,0xC8,0x03,0x00,0x1B,0x78,0x03,0x00,0x0E,0x0E,0x03,0x00,0x0E,0x09,0x03,0x00,0x0E,0x08,0x03,0x00,0x1A,0xE8,0x03,0x00,0x33,0x08,0x03,0x00,0x23,0x08,0x03,0x00,0x43,0x08,0x03,0x80,0x01,0xE8,0x03,
		0x80,0xE1,0x08,0x03,0xC0,0x3F,0x08,0x03,0x80,0x07,0x0C,0x03,0x00,0x00,0x08,0x02,0x00,0x00,0xF0,0x0F,0x00,0x80,0x7F,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"取",3*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0xC0,0x01,0x04,0x00,0xC0,0x07,0x04,0x00,0xC0,0x00,0x06,0x04,0xC0,0x00,0x06,0x0C,0xC0,0x00,0x06,0x0C,0xC0,0x00,0x06,0x0E,0xC0,0x00,0x02,0x06,0xC0,0xF8,0x03,0x03,0xC0,0x18,0x02,0x01,0xC0,0x00,0x82,0x00,0xC0,0x00,0x82,0x00,0x80,0xF8,0x43,0x00,0x80,0x18,0x02,0x00,0x80,0x01,0x02,0x02,0xC0,0x01,0x07,0x06,0xC0,0xF9,0x04,0x0E,0x80,0x37,0x00,0x08,
		0x00,0x30,0x00,0x00,0x00,0x30,0x06,0x00,0x00,0x32,0x0E,0x00,0x80,0x31,0x4C,0x00,0xC0,0x30,0xC0,0x00,0x70,0x30,0xC0,0x01,0x70,0x30,0x80,0x01,0x60,0x30,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"消",4*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0E,0x00,0x00,0x00,0x07,0x00,0x00,0x80,0x03,0x00,0x00,0xC0,0x01,0x00,0x00,0xE0,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,
		0x00,0x00,0x30,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0xC0,0x01,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x0E,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"）",5*/
};

static const unsigned char Walk[3][128] = {
		{0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x0C,0x00,0x01,0x00,0x0C,0x80,0x03,0x00,0x0C,0x80,0x03,0x00,0x0C,0xC0,0x01,0x00,0x0C,0xB0,0x01,0x00,0x0C,0x88,0x00,0x00,0x0C,0x80,0x00,0x00,0x0C,0x80,0x00,0x00,0x0C,0x80,0x00,0x00,0x0C,0xC0,0x00,0x00,0x0C,0xC3,0x00,0x00,0xFC,0xCF,0x1C,0xF8,0x1F,0xC0,0x07,0x70,0x0C,0xE0,0x00,
		0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x0C,0x30,0x00,0x00,0x0C,0x70,0x00,0x00,0x1C,0xF0,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"计",0*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0xE0,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x0E,0x00,0x00,0x00,0x03,0x00,0x00,0xC0,0x01,0x00,0x00,0xE0,0x00,0x00,0x00,0x70,0x40,0x00,0x00,0xB8,0x60,0x00,0x00,0x98,0x61,0x00,0x00,0x8C,0x71,0x00,0x00,0x86,0x31,0x00,0x00,0x86,0x11,0x00,0x00,0x83,0x11,0x00,0x80,0x83,0x01,0x00,0x80,0x83,0x01,0x00,0x00,0x83,0xC1,0x07,0x00,0x80,0xFF,0x00,0xF0,0xFF,0x11,0x00,
		0xE0,0xC3,0x10,0x00,0x00,0xC0,0x30,0x00,0x00,0xC0,0x30,0x00,0x00,0xC0,0x30,0x00,0x00,0xF8,0x00,0x00,0x00,0xDE,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"步",1*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0xFC,0x00,0x82,0x03,0xF0,0x01,0xC7,0x00,0xC0,0xC3,0x7C,0x00,0x00,0x63,0x38,0x00,0x00,0x36,0x78,0x00,0x00,0x1C,0x8C,0x00,0x00,0x0C,0xCC,0x38,0x00,0x1C,0xC4,0x3F,0x00,0x34,0x7E,0x00,0x00,0x26,0x66,0x00,0x00,0x42,0x64,0x18,0x00,0x02,0x00,0x04,0x00,0x82,0x10,0x02,0x00,0x43,0x33,0x01,0x00,0x2C,0xBE,0x00,0xC0,0x37,0x70,0x02,0xF0,0x10,0xF8,0x0F,
		0x00,0x18,0x3F,0x00,0x00,0x08,0xB0,0x00,0x00,0x0C,0xB4,0x01,0x00,0x0C,0xB2,0x01,0x00,0x8E,0x33,0x00,0x00,0x0E,0x31,0x00,0x00,0x0C,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"数",2*/
};

static const unsigned char Walk1[8][128] = {
		{0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x07,0x00,0x00,0x80,0x01,0x00,0x00,0xC0,0x20,0x00,0x00,0x70,0x18,0x00,0x00,0x38,0x0C,0x00,0x00,0x30,0x07,0x10,0x00,0x80,0x61,0x0C,0xFC,0xE1,0x11,0x06,0xE0,0xC3,0x88,0x01,0x80,0x07,0x86,0x00,0x00,0x0E,0xC7,0x00,0x00,0x9C,0x63,0x00,0x00,0x10,0x33,0x00,0x00,0x20,0x10,0x00,0x00,0x40,0xF8,0x03,0x00,0x80,0x7F,0x00,
		0x80,0xFF,0x0C,0x00,0x00,0x07,0x0C,0x00,0x00,0x00,0x78,0x00,0x00,0x0C,0x7F,0x00,0x00,0xFC,0x31,0x00,0x00,0x18,0x08,0x00,0x00,0x30,0x04,0x00,0x00,0x00,0x06,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"参",0*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0xFC,0x00,0x82,0x03,0xF0,0x01,0xC7,0x00,0xC0,0xC3,0x7C,0x00,0x00,0x63,0x38,0x00,0x00,0x36,0x78,0x00,0x00,0x1C,0x8C,0x00,0x00,0x0C,0xCC,0x38,0x00,0x1C,0xC4,0x3F,0x00,0x34,0x7E,0x00,0x00,0x26,0x66,0x00,0x00,0x42,0x64,0x18,0x00,0x02,0x00,0x04,0x00,0x82,0x10,0x02,0x00,0x43,0x33,0x01,0x00,0x2C,0xBE,0x00,0xC0,0x37,0x70,0x02,0xF0,0x10,0xF8,0x0F,
		0x00,0x18,0x3F,0x00,0x00,0x08,0xB0,0x00,0x00,0x0C,0xB4,0x01,0x00,0x0C,0xB2,0x01,0x00,0x8E,0x33,0x00,0x00,0x0E,0x31,0x00,0x00,0x0C,0x30,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"数",1*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0xFC,0x00,0x3C,0xFC,0x6F,0x00,0x3F,0x7C,0x60,0xC0,0x07,0x00,0x60,0x78,0x06,0x00,0x60,0x66,0x06,0x00,0x60,0x60,0x06,0x00,0x70,0x60,0x06,0xC0,0x7F,0x60,0x06,0xE0,0x61,0x60,0x06,0x40,0x60,0x7C,0x0C,0x40,0x60,0x60,0x00,0x60,0x60,0x60,0x00,0x60,0x78,0x60,0x00,0xE0,0x67,0xC0,0x01,0xC0,0x60,0x78,0x01,
		0x00,0x60,0x08,0x03,0x00,0x60,0x08,0x02,0x00,0x60,0x0C,0x02,0x00,0x78,0x8C,0x07,0x80,0xDF,0x7C,0x00,0xE0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"距",2*/

		{0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x80,0x03,0x00,0x00,0x80,0x03,0x00,0x02,0xC0,0x05,0x00,0x02,0xC0,0x00,0x00,0x06,0xC0,0x00,0x08,0x02,0xC0,0x08,0x1E,0x02,0xC0,0xD8,0x0F,0x02,0xC0,0x38,0x04,0x02,0xC0,0x30,0x04,0x02,0xC0,0x20,0x06,0x06,0xE0,0x00,0xFE,0x07,0xE0,0xFF,0x03,0x00,0x80,0x03,0x03,0x00,0x00,0x80,0x03,0x00,0x00,0x08,0x7A,0x00,0x00,0xFC,0x7F,0x00,0x00,0x06,0x40,0x00,0x00,0x26,0x66,0x00,
		0x00,0xE6,0x63,0x00,0x00,0xC3,0x41,0x00,0x00,0xC3,0x07,0x00,0x00,0x64,0x00,0x00,0x00,0x60,0xFF,0x01,0x80,0xFF,0x01,0x00,0x80,0x03,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"离",3*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0xE0,0x0F,0x00,0x00,0xFC,0x7F,0x00,0x00,0x00,0xF8,0x07,0x00,0x00,0x20,0x3E,0x3C,0x00,0x20,0xE0,0x0F,0x00,0x60,0x30,0x01,0x00,0x20,0x88,0x01,0x80,0x20,0x86,0x01,0x80,0x23,0x03,0x01,0x00,0xA7,0x01,0x03,0x00,0xFC,0x00,0x02,0x00,0x60,0x00,0x02,0x00,0xE0,0x03,0x03,0x00,0x7F,0x86,0x3F,0x00,0x21,0x84,0x07,0x80,0x21,0x04,0x00,0x80,0xE1,0x0F,0x00,
		0xC0,0x3F,0x00,0x00,0x00,0x21,0x00,0x00,0x00,0xA0,0x67,0x00,0x00,0xFF,0xE1,0x00,0x00,0x27,0xC0,0x01,0x00,0x20,0x00,0x03,0x00,0x20,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"速",4*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x01,0x40,0x00,0xF8,0x07,0x38,0x20,0x80,0x0F,0x0E,0x10,0x00,0x9C,0x03,0x08,0x00,0xF0,0x00,0x04,0x00,0xE0,0x00,0x06,0x00,0xB0,0x01,0x02,0x00,0x30,0x03,0x03,0x00,0x18,0x06,0x01,0x00,0x18,0x84,0x01,0x00,0xDC,0x87,0x01,0x00,0x3C,0x80,0x00,0x00,0x00,0xC0,0x00,0x00,0xC0,0xC3,0x00,0x00,0x38,0xC2,0x00,0x00,0x10,0xC2,0x00,0x00,0x98,0x5F,0x00,0x00,0xFF,0x46,0x00,
		0xC0,0x0B,0x46,0x00,0x00,0x08,0x64,0x00,0x00,0x1C,0x60,0x00,0x00,0x00,0x7F,0x00,0x00,0xFC,0x01,0x00,0x00,0x1F,0x00,0x00,0x00,0x60,0x00,0x00,0x00,0xE0,0x00,0x00,0x00,0xC0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"度",5*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0xE0,0x1F,0x18,0x08,0xF8,0x3F,0x38,0x0C,0x38,0x60,0x78,0x0C,0x10,0x40,0x18,0x04,0x10,0x40,0x18,0x06,0x10,0x40,0x18,0x06,0x00,0x40,0xD8,0x03,0x00,0x70,0x18,0x02,0x00,0x5C,0x18,0x02,0x00,0x47,0xF8,0x03,0x00,0x43,0x58,0x02,0x00,0x63,0x18,0x02,0x00,0xC0,0x18,0x02,0x00,0x00,0xF8,0x03,0xC0,0x3F,0x10,0x00,0xC0,0x71,0x00,0x0E,0x40,0x40,0xC6,0x0F,
		0x40,0x40,0x3E,0x04,0x40,0x40,0x0E,0x02,0x00,0x70,0x0C,0x03,0x00,0x5C,0x98,0x01,0x00,0x47,0x80,0x00,0x00,0x43,0xC0,0x00,0x00,0x40,0xE0,0x00,0x00,0xE0,0x60,0x00,0x00,0xC0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"能",6*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0x03,0xE0,0xFF,0xFF,0x00,0xC0,0x7F,0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x3B,0x00,0x00,0xF8,0x7F,0x00,0x00,0x38,0x03,0x00,0x00,0x00,0x23,0x00,0x00,0xF0,0x3F,0x00,0x00,0x18,0x23,0x00,0x00,0x08,0x63,0x00,0x00,0xCC,0x6F,0x00,0x00,0x4E,0x63,0x00,0x00,0x0E,0xFF,0x00,0x00,0xFC,0x01,0x00,0x00,0x18,0x00,0x3F,0x00,0xC0,0xFF,0x0F,0xFC,0xFF,0x01,0x00,
		0x70,0x00,0x00,0x00,0x00,0x10,0x0F,0x00,0x00,0xF0,0x18,0x00,0x00,0x18,0x10,0x00,0x00,0x1C,0x3F,0x00,0x00,0x9C,0x31,0x00,0x00,0x0E,0x70,0x00,0x00,0xDE,0x7F,0x00,0x00,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"量",7*/
};

static const unsigned char Walk2[14][64] = {

		{0x00,0x00,0x00,0x00,0x04,0x00,0x0C,0x00,0x18,0x00,0x38,0x00,0x30,0x00,0x60,0x00,0x60,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x60,0x00,0x60,0x00,0x30,0x00,0x18,0x00,0x1C,0x00,0x0E,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"(",0*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0xC6,0xF1,0xFE,0xFF,0xBE,0xEF,0x1C,0xE7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"m",1*/

		{0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x70,0x00,0x38,0x00,0x18,0x00,0x0C,0x00,0x0E,0x00,0x06,0x00,0x06,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x06,0x00,0x06,0x00,0x0C,0x00,0x0C,0x00,0x18,0x00,0x30,0x00,0x70,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00},/*")",2*/

		{0x00,0x00,0x00,0x00,0x04,0x00,0x0C,0x00,0x18,0x00,0x38,0x00,0x30,0x00,0x60,0x00,0x60,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x60,0x00,0x60,0x00,0x30,0x00,0x18,0x00,0x1C,0x00,0x0E,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"(",3*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0x86,0xE1,0xC6,0xF1,0xFE,0xFF,0xBE,0xEF,0x1C,0xE7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"m",4*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x60,0x00,0x60,0x00,0x30,0x00,0x10,0x00,0x18,0x00,0x08,0x00,0x0C,0x00,0x04,0x00,0x06,0x00,0x03,0x00,0x03,0x80,0x01,0x80,0x00,0xC0,0x00,0x40,0x00,0x60,0x00,0x20,0x00,0x30,0x00,0x18,0x00,0x08,0x00,0x0C,0x00,0x04,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"/",5*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x03,0xF0,0x0F,0xF8,0x1F,0x1C,0x38,0x1C,0x38,0x1C,0x00,0x78,0x00,0xF0,0x0F,0xC0,0x1F,0x00,0x1C,0x00,0x38,0x18,0x38,0x38,0x1C,0xF0,0x0F,0xE0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"s",6*/

		{0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x70,0x00,0x38,0x00,0x18,0x00,0x0C,0x00,0x0E,0x00,0x06,0x00,0x06,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x06,0x00,0x06,0x00,0x0C,0x00,0x0C,0x00,0x18,0x00,0x30,0x00,0x70,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00},/*")",7*/

		{0x00,0x00,0x00,0x00,0x04,0x00,0x0C,0x00,0x18,0x00,0x38,0x00,0x30,0x00,0x60,0x00,0x60,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x00,0xC0,0x00,0xC0,0x00,0xC0,0x00,0x60,0x00,0x60,0x00,0x30,0x00,0x18,0x00,0x1C,0x00,0x0E,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"(",8*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x30,0x18,0x30,0x38,0x30,0x70,0x30,0x70,0x30,0xE0,0x38,0xC0,0x3C,0xC0,0x3F,0x80,0x37,0xC0,0x33,0xE0,0x31,0xF0,0x30,0x78,0x30,0x3C,0x30,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"k",9*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0xF0,0x0F,0xF8,0x1F,0x3C,0x38,0x1C,0x38,0x1C,0x70,0x00,0x70,0x00,0x70,0x00,0x70,0x00,0x70,0x1C,0x30,0x1C,0x38,0x78,0x1E,0xF0,0x0F,0xC0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"c",10*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0xDC,0x1F,0xF8,0x3F,0x78,0x70,0x38,0x70,0x18,0x30,0x18,0x38,0xD8,0x1F,0xF8,0x07,0x38,0x00,0x18,0x38,0x18,0x38,0x78,0x1E,0xF0,0x0F,0xC0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"a",11*/

		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"l",12*/

		{0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x70,0x00,0x38,0x00,0x18,0x00,0x0C,0x00,0x0E,0x00,0x06,0x00,0x06,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x06,0x00,0x06,0x00,0x0C,0x00,0x0C,0x00,0x18,0x00,0x30,0x00,0x70,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00},/*")",13*/
};

uint8_t dd;
uint8_t nn;
uint8_t m;
uint8_t k;

uint16_t result0;
uint16_t result1;
uint16_t result2;

float Ax;
float Ay;
float Az;
float Sa;
float Samax;
float Samin;
float deltax;
float deltay;
float deltaz;
float Axmax;
float Axmin;
float Aymax;
float Aymin;
float Azmax;
float Azmin;
float alpha;
float beta;
float gamma;

volatile int accel_select;

unsigned int interupt_flag;

uint16_t step;
uint16_t timen;
uint8_t i;

WORD rxByteCount;                        // Momentarily stores the number of bytes received
BYTE buf_bcuartToUsb[BC_RXBUF_SIZE];     // Same size as the UART's rcv buffer
BYTE buf_usbToBcuart[128];               // This can be any size

static unsigned int g = 0;
int status=0;
//int accel_select;
unsigned int inn;
//unsigned int CRCresult;
//unsigned char CRCtmp,CRCindex;
//const unsigned int CRC_TA3[256]={
//        0x0000,0x1189,0x2312,0x329B,0x4624,0x57AD,0x6536,0x74BF,
//        0x8C48,0x9DC1,0xAF5A,0xBED3,0xCA6C,0xDBE5,0xE97E,0xF8F7,
//        0x1081,0x0108,0x3393,0x221A,0x56A5,0x472C,0x75B7,0x643E,
//        0x9CC9,0x8D40,0xBFDB,0xAE52,0xDAED,0xCB64,0xF9FF,0xE876,
//        0x2102,0x308B,0x0210,0x1399,0x6726,0x76AF,0x4434,0x55BD,
//        0xAD4A,0xBCC3,0x8E58,0x9FD1,0xEB6E,0xFAE7,0xC87C,0xD9F5,
//        0x3183,0x200A,0x1291,0x0318,0x77A7,0x662E,0x54B5,0x453C,
//        0xBDCB,0xAC42,0x9ED9,0x8F50,0xFBEF,0xEA66,0xD8FD,0xC974,
//        0x4204,0x538D,0x6116,0x709F,0x0420,0x15A9,0x2732,0x36BB,
//        0xCE4C,0xDFC5,0xED5E,0xFCD7,0x8868,0x99E1,0xAB7A,0xBAF3,
//        0x5285,0x430C,0x7197,0x601E,0x14A1,0x0528,0x37B3,0x263A,
//        0xDECD,0xCF44,0xFDDF,0xEC56,0x98E9,0x8960,0xBBFB,0xAA72,
//        0x6306,0x728F,0x4014,0x519D,0x2522,0x34AB,0x0630,0x17B9,
//        0xEF4E,0xFEC7,0xCC5C,0xDDD5,0xA96A,0xB8E3,0x8A78,0x9BF1,
//        0x7387,0x620E,0x5095,0x411C,0x35A3,0x242A,0x16B1,0x0738,
//        0xFFCF,0xEE46,0xDCDD,0xCD54,0xB9EB,0xA862,0x9AF9,0x8B70,
//        0x8408,0x9581,0xA71A,0xB693,0xC22C,0xD3A5,0xE13E,0xF0B7,
//        0x0840,0x19C9,0x2B52,0x3ADB,0x4E64,0x5FED,0x6D76,0x7CFF,
//        0x9489,0x8500,0xB79B,0xA612,0xD2AD,0xC324,0xF1BF,0xE036,
//        0x18C1,0x0948,0x3BD3,0x2A5A,0x5EE5,0x4F6C,0x7DF7,0x6C7E,
//        0xA50A,0xB483,0x8618,0x9791,0xE32E,0xF2A7,0xC03C,0xD1B5,
//        0x2942,0x38CB,0x0A50,0x1BD9,0x6F66,0x7EEF,0x4C74,0x5DFD,
//        0xB58B,0xA402,0x9699,0x8710,0xF3AF,0xE226,0xD0BD,0xC134,
//        0x39C3,0x284A,0x1AD1,0x0B58,0x7FE7,0x6E6E,0x5CF5,0x4D7C,
//        0xC60C,0xD785,0xE51E,0xF497,0x8028,0x91A1,0xA33A,0xB2B3,
//        0x4A44,0x5BCD,0x6956,0x78DF,0x0C60,0x1DE9,0x2F72,0x3EFB,
//        0xD68D,0xC704,0xF59F,0xE416,0x90A9,0x8120,0xB3BB,0xA232,
//        0x5AC5,0x4B4C,0x79D7,0x685E,0x1CE1,0x0D68,0x3FF3,0x2E7A,
//        0xE70E,0xF687,0xC41C,0xD595,0xA12A,0xB0A3,0x8238,0x93B1,
//        0x6B46,0x7ACF,0x4854,0x59DD,0x2D62,0x3CEB,0x0E70,0x1FF9,
//        0xF78F,0xE606,0xD49D,0xC514,0xB1AB,0xA022,0x92B9,0x8330,
//        0x7BC7,0x6A4E,0x58D5,0x495C,0x3DE3,0x2C6A,0x1EF1,0x0F78};
//void ACCEL(int transmit_mode);
//void ACCEL2(int transmit_mode);
//void WALK(int transmit_mode);
//void WALK2(int transmit_mode);
void judgementone(void);

void Init_ADC(void)
{
//    P6SEL |= 0x07;                                   //使能A/D通道A0-A2
//    REFCTL0 |= REFMSTR+REFVSEL_2+REFON+REFTCOFF;
//    ADC12CTL0 &= ~ADC12ENC;                            //使AD模块处于初始状态
//    ADC12CTL0=ADC12ON+ADC12REF2_5V+ADC12REFON+ADC12SHT1_2;   //打开ADC，设置时钟，内部参考电压2.5V   8MHz
//    ADC12CTL1=ADC12SHP+ADC12CONSEQ_1;                       //设置采样信号来源采样定时器，序列通道单次转换模式
//    ADC12CTL2 = 0x0020;
//    ADC12CTL2 |= ADC12REFOUT;
//    ADC12IFG = 0xFFFF;
//    ADC12MCTL0=ADC12SREF_1+ADC12INCH_0;                              //Vr+=Vref+,Vr-=AVss    A12通道
//    ADC12MCTL1=ADC12SREF_1+ADC12INCH_1;
//    ADC12MCTL12=ADC12SREF_1+ADC12INCH_2+ADC12EOS;
//    ADC12CTL0 |=ADC12ENC;

	ADC12CTL0 &= ~ADC12ENC;
	P6SEL |= 0x07;   //p6.0，p6.1作为输入口
	REFCTL0 |= REFMSTR+REFVSEL_2+REFON+REFTCOFF;
	ADC12CTL0 |= ADC12ON+ADC12REF2_5V+ADC12REFON+ADC12SHT0_15;//打开ADC12内核
	ADC12CTL1 = ADC12CONSEQ_3+ ADC12SSEL_1+ADC12SHS_2;//序列通道多次转换模式+ACLK+定时器B触发采样
	ADC12MCTL0 = ADC12SREF_1+ADC12INCH_0;//p6.0为0通道
	ADC12MCTL1 = ADC12SREF_1+ADC12INCH_1;//p6.1为1通道
	ADC12MCTL2 = ADC12SREF_1+ADC12INCH_2;
	ADC12MCTL12 = ADC12SREF_1+ADC12INCH_2+ADC12EOS;
	ADC12CTL2 |= ADC12REFOUT;
	ADC12IE = ADC12IE10;
	TB0CCTL0=0x0080; //定时器B输出为翻转模式
	TB0CCR0=328;//采样率??
	TB0CTL=TBSSEL_1+MC_1+TBCLR; //ACLK+增模式+CLEAR
	ADC12CTL0 |= ADC12ENC;//允许启动AD转换
}

void adc12(void)
{
  unsigned int i;

      for (i=0;i<3;i++);
      {
         ADC12CTL0 |= ADC12SC;              //sampling open,AD转换完成后(ADC12BUSY=0),ADC12SC自动复位;
         ADC12CTL0 &= ADC12SC;

      }
}

void ACCEL(int transmit_mode){
	USE_LCD();
	initClocks(20000000);

	interupt_flag=0;

	_DINT();
	buttonsPressed=0;
	SPILCD_Clear(WHITE);

//    PMM_setVCore(PMM_BASE, PMM_CORE_LEVEL_2);
//    initClocks(8000000);   // Config clocks. MCLK=SMCLK=FLL=8MHz; ACLK=REFO=32kHz
//    _EINT();

    DRAW_han(464,310,Ahan[1]);
    DRAW_han(424,310,Ahan[2]);
    DRAW_han(384,310,Ahan[3]);
    DRAW_Other(324,310-32,2);

    DRAW_han(464,220,Ahan[0]);
    DRAW_han(424,220,Ahan[1]);
    DRAW_han(384,220,Ahan[2]);
    DRAW_han(344,220,Ahan[3]);
    DRAW_Other(284,220-32,2);

    DRAW_han(464,162,Ahan2[0]);
    DRAW_han(424,162,Ahan2[1]);
    DRAW_Other(364,162-32,2);

    DRAW_NUM1(448-16*0,246,Ahan1[0]);
    DRAW_NUM1(448-16*7,246,Ahan1[3]); //336
    DRAW_Other(448-16*1,246,2);
    DRAW_Other(448-16*4,246,3);

    DRAW_NUM1(128-16*0,246,Ahan1[2]);
    DRAW_NUM1(128-16*7,246,Ahan1[3]);
    DRAW_Other(128-16*1,246,2);
    DRAW_Other(128-16*4,246,3);

    DRAW_NUM1(288-16*0,246,Ahan1[1]);
    DRAW_NUM1(288-16*7,246,Ahan1[3]);
    DRAW_Other(288-16*1,246,2);
    DRAW_Other(288-16*4,246,3);

    DRAW_NUM1(448-16*0,98,Ahan1[0]);
    DRAW_han(448-16*4,98+32,Ahan2[2]);
    DRAW_Other(448-16*1,98,2);

    DRAW_NUM1(280-16*0,98,Ahan1[1]);
    DRAW_han(280-16*4,98+32,Ahan2[2]);
    DRAW_Other(280-16*1,98,2);

    DRAW_NUM1(112-16*0,98,Ahan1[2]);
    DRAW_han(112-16*4,98+32,Ahan2[2]);
    DRAW_Other(112-16*1,98,2);

    DRAW_Other(280-16*2,188,3);

    k=0;
    dd=0;
    nn=0;
    m=0;
    Ax=0;
    Ay=0;
    Az=0;
    Sa=0;
    Samax=0;
    Samin=6;
    deltax=0;
    deltay=0;
    deltaz=0;
    Axmax=0;
    Axmin=3;
    Aymax=0;
    Aymin=3;
    Azmax=0;
    Azmin=3;

    inn=0;

    results1[0]='S';
    results1[1]='T';
    results1[2]='A';
    results1[3]='R';
    results1[4]='T';
    results1[5]='A';
    results1[6]='C';
    results1[21]='A';
    results1[22]='A';
    results1[23]='A';
    results1[24]='A';
    results1[25]='A';
    results1[26]='E';
    results1[27]='N';
    results1[28]='D';

    USB_setup(TRUE,TRUE);  // Init USB; if a USB host (PC) is present, connect*/

    Init_UART2();
    UCA0IE |= UCRXIE;
    Init_ADC();
    ADC12CTL0 |= ADC12SC;//启动采样
    ADC12CTL0 |= ADC12ENC+ADC12ON;
    _EINT();
//	    unsigned int buuf[10];
//	    unsigned int iii;
//	    iii=0;
    while(!(buttonsPressed & BUTTON_S4))
    {
    	if(interupt_flag==1){
    		inn++;
        result0=ADC12MEM0;
        result1=ADC12MEM1;
        result2=ADC12MEM2;
//
//                buuf[iii]=result1;
//                iii++;
//
//                if(iii==10){
//                	int i;
//                	unsigned int ave;
//                	ave=0;
//                	for(i=0;i<9;i++)
//                	{
//                		ave=ave+(buuf[i]+buuf[i+1])/2;
//                		i++;
//                	}
//                	ave=ave/5;
//                	iii=0;
//                }
        Ax=0.0008*(result0-2285.0000);
        Ay=0.000813*(result1-2670.0000);
        Az=0.00077*(result2-2150.0000);

        Sa=sqrtf(Ax*Ax+Ay*Ay+Az*Az);

        alpha=(atanf(Ax/(sqrtf(Ay*Ay+Az*Az))))*180.0000/3.1416;
        beta=(atanf(Ay/(sqrtf(Ax*Ax+Az*Az))))*180.0000/3.1416;
        gamma=(atanf((sqrtf(Ax*Ax+Ay*Ay))/Az))*180.0000/3.1416;

        judgementone();
        if(inn==50){
        	inn=0;
        int alphaX;
        int betaY;
        int gammaZ;

        if(alpha>=0)
        {
        	alphaX=(int)(fabsf(alpha+0.5000));
        }else
        {
        	alphaX=(int)(fabsf(alpha-0.5000));
        }
        if(beta>=0)
        {
        	betaY=(int)(fabsf(beta+0.5000));
        }else
        {
        	betaY=(int)(fabsf(beta-0.5000));
        }
        if(gamma>=0)
        {
        	gammaZ=(int)(fabsf(gamma+0.5000));
        }else
        {
        	gammaZ=(int)(fabsf(gamma-0.5000));
        }

        int str0[3];
        if(Ax>=0)
            {
        	DRAW_Other(448-16*2,246,4);
            }else
            {
            	DRAW_Other(448-16*2,246,5);
            }
        str0[0]   =   (int)(fabsf(Ax));
        str0[1]   =   ((int)(fabsf(Ax*10)))%10;
        str0[2]   =   ((int)(fabsf(Ax*100)))%10;

        DRAW_NUM(448-16*3,246,str0[0],RED);
        DRAW_NUM(448-16*5,246,str0[1],RED);
        DRAW_NUM(448-16*6,246,str0[2],RED);

        int str1[3];
        if(Ay>=0)
            {
        	DRAW_Other(288-16*2,246,4);
            }else
            {
            	DRAW_Other(288-16*2,246,5);
            }
        str1[0]   =   (int)(fabsf(Ay));
        str1[1]   =   ((int)(fabsf(Ay*10)))%10;
        str1[2]   =   ((int)(fabsf(Ay*100)))%10;

        DRAW_NUM(288-16*3,246,str1[0],RED);
        DRAW_NUM(288-16*5,246,str1[1],RED);
        DRAW_NUM(288-16*6,246,str1[2],RED);

        int str2[3];
        if(Az>=0)
            {
        	DRAW_Other(128-16*2,246,4);
            }else
            {
            	DRAW_Other(128-16*2,246,5);
            }
        str2[0]   =   (int)(fabsf(Az));
        str2[1]   =   ((int)(fabsf(Az*10)))%10;
        str2[2]   =   ((int)(fabsf(Az*100)))%10;

        DRAW_NUM(128-16*3,246,str2[0],RED);
        DRAW_NUM(128-16*5,246,str2[1],RED);
        DRAW_NUM(128-16*6,246,str2[2],RED);

        int str3[2];
        if(alpha>=0)
        {
        	DRAW_Other(448-16*2,98,4);
        }else
        {
        	DRAW_Other(448-16*2,98,5);
        }
        str3[0]   =   alphaX/10;
        str3[1]   =   alphaX%10;

        DRAW_NUM(448-16*3,98,str3[0],RED);
        DRAW_NUM(448-16*4,98,str3[1],RED);

        int str4[2];
        if(beta>=0)
        {
        	DRAW_Other(280-16*2,98,4);
        }else
        {
        	DRAW_Other(280-16*2,98,5);
        }
        str4[0]   =   betaY/10;
        str4[1]   =   betaY%10;

        DRAW_NUM(280-16*3,98,str4[0],RED);
        DRAW_NUM(280-16*4,98,str4[1],RED);

        int str5[2];
        if(gamma>=0)
        {
        	DRAW_Other(112-16*2,98,4);
        }else
        {
        	DRAW_Other(112-16*2,98,5);
        }
        str5[0]   =   gammaZ/10;
        str5[1]   =   gammaZ%10;

        DRAW_NUM(112-16*3,98,str5[0],RED);
        DRAW_NUM(112-16*4,98,str5[1],RED);

        int str6[3];
        str6[0]   =   (int)(Sa);
        str6[1]   =   ((int)(Sa*10))%10;
        str6[2]   =   ((int)(Sa*100))%10;

        DRAW_NUM(280-16*1,188,str6[0],RED);
        DRAW_NUM(280-16*3,188,str6[1],RED);
        DRAW_NUM(280-16*4,188,str6[2],RED);

        if(Ax<0){
        	results1[7]='-';
        }else{
        	results1[7]='+';
        }
        results1[8]=(int)(fabsf(Ax*100));
        if(Ay<0){
        	results1[9]='-';
        }else{
        	results1[9]='+';
        }
        results1[10]=(int)(fabsf(Ay*100));
        if(Az<0){
        	results1[11]='-';
        }else{
        	results1[11]='+';
        }
        results1[12]=(int)(fabsf(Az*100));
        if(alpha<0){
        	results1[13]='-';
        }else{
        	results1[13]='+';
        }
        results1[14]=alphaX;
        if(beta<0){
        	results1[15]='-';
        }else{
        	results1[15]='+';
        }
        results1[16]=betaY;
        if(gamma<0){
        	results1[17]='-';
        }else{
        	results1[17]='+';
        }
        results1[18]=gammaZ;
        results1[19]=(int)(Sa*100);
        results1[20]=status;
        if(transmit_mode==1){
            bcUartInit();
            bcUartSend_char(results1, 29);//buf_bcuartToUsb
             }

        if(transmit_mode==2)
        {
            hidSendDataInBackground(results1, 58, HID0_INTFNUM,10000);

        }

        if(transmit_mode==3){
            	 int i;
            	 for(i=0;i<29;i++)
            	 {
                     UCA0TXBUF = results1[i];

                     while(!(UCTXIFG==(UCTXIFG & UCA0IFG))&&((UCA0STAT & UCBUSY)==UCBUSY));

                     int a,k;
                     for(a=0;a<10;a++)
                     {
                          for(k=0;k<80;k++);
                     }
            	 }
             }
        }
        dd+=1;

        interupt_flag=0;

    	ADC12IE |= ADC12IE10;
        ADC12CTL0 |= ADC12SC;//启动采样
        ADC12CTL0 |= ADC12ENC+ADC12ON;
    	}

    }

}

void ACCEL2(int transmit_mode){
	USE_LCD();
	initClocks(20000000);

	 _EINT();
	buttonsPressed=0;
	BUTTON_S4=0;
	SPILCD_Clear(WHITE);

    DRAW_han(464,310,Ahan[1]);
    DRAW_han(424,310,Ahan[2]);
    DRAW_han(384,310,Ahan[3]);
    DRAW_Other(324,310-32,2);

    DRAW_han(464,220,Ahan[0]);
    DRAW_han(424,220,Ahan[1]);
    DRAW_han(384,220,Ahan[2]);
    DRAW_han(344,220,Ahan[3]);
    DRAW_Other(284,220-32,2);

    DRAW_han(464,162,Ahan2[0]);
    DRAW_han(424,162,Ahan2[1]);
    DRAW_Other(364,162-32,2);

    DRAW_NUM1(448-16*0,246,Ahan1[0]);
    DRAW_NUM1(448-16*7,246,Ahan1[3]); //336
    DRAW_Other(448-16*1,246,2);
    DRAW_Other(448-16*4,246,3);

    DRAW_NUM1(128-16*0,246,Ahan1[2]);
    DRAW_NUM1(128-16*7,246,Ahan1[3]);
    DRAW_Other(128-16*1,246,2);
    DRAW_Other(128-16*4,246,3);

    DRAW_NUM1(288-16*0,246,Ahan1[1]);
    DRAW_NUM1(288-16*7,246,Ahan1[3]);
    DRAW_Other(288-16*1,246,2);
    DRAW_Other(288-16*4,246,3);

    DRAW_NUM1(448-16*0,98,Ahan1[0]);
    DRAW_han(448-16*4,98+32,Ahan2[2]);
    DRAW_Other(448-16*1,98,2);

    DRAW_NUM1(280-16*0,98,Ahan1[1]);
    DRAW_han(280-16*4,98+32,Ahan2[2]);
    DRAW_Other(280-16*1,98,2);

    DRAW_NUM1(112-16*0,98,Ahan1[2]);
    DRAW_han(112-16*4,98+32,Ahan2[2]);
    DRAW_Other(112-16*1,98,2);

    DRAW_Other(280-16*2,188,3);

    results1[0]='S';
    results1[1]='T';
    results1[2]='A';
    results1[3]='R';
    results1[4]='T';
    results1[5]='A';
    results1[6]='C';
    results1[21]='A';
    results1[22]='A';
    results1[23]='A';
    results1[24]='A';
    results1[25]='A';
    results1[26]='E';
    results1[27]='N';
    results1[28]='D';

    k=0;
    dd=0;
    nn=0;
    m=0;
    Ax=0;
    Ay=0;
    Az=0;
    Sa=0;
    Samax=0;
    Samin=6;
    deltax=0;
    deltay=0;
    deltaz=0;
    Axmax=0;
    Axmin=3;
    Aymax=0;
    Aymin=3;
    Azmax=0;
    Azmin=3;

    USB_setup(TRUE,TRUE);  // Init USB; if a USB host (PC) is present, connect*/

    Init_UART2();
    UCA0IE |= UCRXIE;
//    unsigned int buuf[10];
//    unsigned int iii;
//    iii=0;
    while(!(buttonsPressed & BUTTON_S4))
    {
    	if(accel_end==1){

//    	int i;
//    	for(i=0;i<3;i++){
        result0=(RxBuf1[1]<<8)+RxBuf1[2];
        result1=(RxBuf1[3]<<8)+RxBuf1[4];
        result2=(RxBuf1[5]<<8)+RxBuf1[6];

//        buuf[iii]=result2;
//        iii++;
//
//        if(iii==10){
//        	int i;
//        	unsigned int ave;
//        	ave=0;
//        	for(i=0;i<9;i++)
//        	{
//        		ave=ave+(buuf[i]+buuf[i+1])/2;
//        		i++;
//        	}
//        	iii=0;
//        }

        Ax=-8.0899+0.00132*result0;
        Ay=-8.4834+0.00136*result1;
        Az=-8.8634+0.00145*result2;
        Sa=sqrtf(Ax*Ax+Ay*Ay+Az*Az);

        alpha=(atanf(Ax/(sqrtf(Ay*Ay+Az*Az))))*180.0000/3.1416;
        beta=(atanf(Ay/(sqrtf(Ax*Ax+Az*Az))))*180.0000/3.1416;
        gamma=(atanf((sqrtf(Ax*Ax+Ay*Ay))/Az))*180.0000/3.1416;

        judgementone();
//    	}
        int alphaX;
        int betaY;
        int gammaZ;

        if(alpha>=0)
        {
        	alphaX=(int)(fabsf(alpha+0.5000));
        }else
        {
        	alphaX=(int)(fabsf(alpha-0.5000));
        }
        if(beta>=0)
        {
        	betaY=(int)(fabsf(beta+0.5000));
        }else
        {
        	betaY=(int)(fabsf(beta-0.5000));
        }
        if(gamma>=0)
        {
        	gammaZ=(int)(fabsf(gamma+0.5000));
        }else
        {
        	gammaZ=(int)(fabsf(gamma-0.5000));
        }

        int str0[3];
        if(Ax>=0)
            {
        	DRAW_Other(448-16*2,246,4);
            }else
            {
            	DRAW_Other(448-16*2,246,5);
            }
        str0[0]   =   (int)(fabsf(Ax));
        str0[1]   =   ((int)(fabsf(Ax*10)))%10;
        str0[2]   =   ((int)(fabsf(Ax*100)))%10;

        DRAW_NUM(448-16*3,246,str0[0],RED);
        DRAW_NUM(448-16*5,246,str0[1],RED);
        DRAW_NUM(448-16*6,246,str0[2],RED);


        int str1[3];
        if(Ay>=0)
            {
        	DRAW_Other(288-16*2,246,4);
            }else
            {
            	DRAW_Other(288-16*2,246,5);
            }
        str1[0]   =   (int)(fabsf(Ay));
        str1[1]   =   ((int)(fabsf(Ay*10)))%10;
        str1[2]   =   ((int)(fabsf(Ay*100)))%10;

        DRAW_NUM(288-16*3,246,str1[0],RED);
        DRAW_NUM(288-16*5,246,str1[1],RED);
        DRAW_NUM(288-16*6,246,str1[2],RED);//176

        int str2[3];
        if(Az>=0)
            {
        	DRAW_Other(128-16*2,246,4);
            }else
            {
            	DRAW_Other(128-16*2,246,5);
            }
        str2[0]   =   (int)(fabsf(Az));
        str2[1]   =   ((int)(fabsf(Az*10)))%10;
        str2[2]   =   ((int)(fabsf(Az*100)))%10;

        DRAW_NUM(128-16*3,246,str2[0],RED);
        DRAW_NUM(128-16*5,246,str2[1],RED);
        DRAW_NUM(128-16*6,246,str2[2],RED);

        int str3[2];
        if(alpha>=0)
        {
        	DRAW_Other(448-16*2,98,4);
        }else
        {
        	DRAW_Other(448-16*2,98,5);
        }
        str3[0]   =   alphaX/10;
        str3[1]   =   alphaX%10;

        DRAW_NUM(448-16*3,98,str3[0],RED);
        DRAW_NUM(448-16*4,98,str3[1],RED);


        int str4[2];
        if(beta>=0)
        {
        	DRAW_Other(280-16*2,98,4);
        }else
        {
        	DRAW_Other(280-16*2,98,5);
        }
        str4[0]   =   betaY/10;
        str4[1]   =   betaY%10;

        DRAW_NUM(280-16*3,98,str4[0],RED);
        DRAW_NUM(280-16*4,98,str4[1],RED);

        int str5[2];
        if(gamma>=0)
        {
        	DRAW_Other(112-16*2,98,4);
        }else
        {
        	DRAW_Other(112-16*2,98,5);
        }
        str5[0]   =   gammaZ/10;
        str5[1]   =   gammaZ%10;

        DRAW_NUM(112-16*3,98,str5[0],RED);
        DRAW_NUM(112-16*4,98,str5[1],RED);

        int str6[3];
        str6[0]   =   (int)(Sa);
        str6[1]   =   ((int)(Sa*10))%10;
        str6[2]   =   ((int)(Sa*100))%10;

        DRAW_NUM(280-16*1,188,str6[0],RED);
        DRAW_NUM(280-16*3,188,str6[1],RED);
        DRAW_NUM(280-16*4,188,str6[2],RED);

        if(Ax<0){
        	results1[7]='-';
        }else{
        	results1[7]='+';
        }
        results1[8]=(int)(fabsf(Ax*100));
        if(Ay<0){
        	results1[9]='-';
        }else{
        	results1[9]='+';
        }
        results1[10]=(int)(fabsf(Ay*100));
        if(Az<0){
        	results1[11]='-';
        }else{
        	results1[11]='+';
        }
        results1[12]=(int)(fabsf(Az*100));
        if(alpha<0){
        	results1[13]='-';
        }else{
        	results1[13]='+';
        }
        results1[14]=alphaX;
        if(beta<0){
        	results1[15]='-';
        }else{
        	results1[15]='+';
        }
        results1[16]=betaY;
        if(gamma<0){
        	results1[17]='-';
        }else{
        	results1[17]='+';
        }
        results1[18]=gammaZ;
        results1[19]=(int)(Sa*100);
        results1[20]=status;
        if(transmit_mode==1)
        {
        	bcUartInit();
        	bcUartSend_char(results1, 29);//buf_bcuartToUsb
        }

        if(transmit_mode==2)
        {
        	hidSendDataInBackground(results1, 58, HID0_INTFNUM,20000);
        }

        dd+=1;
        Init_UART2();
    	UCA0IE |= UCRXIE;
    	accel_end=0;
    	}

    }

}

void judgementone(void){
    if(dd>0)
    {
    	if(Sa>1.05)
    	{
    		m+=1;
    	}
    	if(m>0&nn<=15)
    	{
    		nn+=1;
    		if(Sa>Samax){Samax=Sa;}
    		if(Sa<Samin){Samin=Sa;}
    		if(Ax>Axmax){Axmax=Ax;}
    		if(Ax<Axmin){Axmin=Ax;}
    		if(Ay>Aymax){Aymax=Ay;}
    		if(Ay<Aymin){Aymin=Ay;}
    		if(Az>Azmax){Azmax=Az;}
    		if(Az<Azmin){Azmin=Az;}
    		deltax=Axmax-Axmin;
    		deltay=Aymax-Aymin;
    		deltaz=Azmax-Azmin;
    	}else{
			m=0;
			nn=0;
            Samax=0;
            Samin=6;
            deltax=0;
            deltay=0;
            deltaz=0;
            Axmax=0;
            Axmin=3;
            Aymax=0;
            Aymin=3;
            Azmax=0;
            Azmin=3;}

    		if(m>=3)
    		{
    			if(Samax>1.05&Samin<1.0)
    			{
    				if(deltax>=1.1||deltay>=1.1||deltaz>=1.1)
    				{
    					if((fabsf(alpha)>=55.0000||fabsf(beta)>=55.0000)&&(fabsf(gamma)>=60.0000))
    					{
    						if(Az<=0.5){
    							DRAW_han(464,100,Ahan3[0]);
    						    DRAW_han(424,100,Ahan3[1]);
    						    DRAW_han(384,100,Ahan3[2]);
    						    DRAW_NUM1(328,100-32,Ahan1[4]);
    						    DRAW_NUM(304,100-32,1,RED);
    						    DRAW_han(296,100,Ahan3[3]);
    						    DRAW_han(256,100,Ahan3[4]);
    						    DRAW_han(216,100,Ahan3[5]);
    						    status=1;

    			            m=0;
    			            nn=0;
    			            Samax=0;
    			            Samin=6;
    			            deltax=0;
    			            deltay=0;
    			            deltaz=0;
    			            Axmax=0;
    			            Axmin=3;
    			            Aymax=0;
    			            Aymin=3;
    			            Azmax=0;
    			            Azmin=3;
    						}
    					}
    				}
    			}
    	    }


    }


    while (buttonsPressed & BUTTON_S1)
    {
    	SPILCD_Clear_Lim(0,479,60,100,WHITE);
    	buttonsPressed=0;
    	status=0;
    }
}

void WALK(int transmit_mode){
	USE_LCD();

	SPILCD_Clear(WHITE);

    initClocks(20000000);   // Config clocks. MCLK=SMCLK=FLL=8MHz; ACLK=REFO=32kHz

    DRAW_han(464,310,Walk[0]);
    DRAW_han(424,310,Walk[1]);
    DRAW_Other(364,310-32,2);

    DRAW_han(464,268,Walk[1]);
    DRAW_han(424,268,Walk[2]);
    DRAW_Other(364,236,2);

    DRAW_han(464,208,Walk1[0]);
    DRAW_han(424,208,Walk1[1]);
    DRAW_Other(364,208-32,2);

    DRAW_han(464,166,Walk1[2]);
    DRAW_han(424,166,Walk1[3]);
    DRAW_NUM1(368,134,Walk2[0]);
    DRAW_NUM1(344,134,Walk2[1]);
    DRAW_NUM1(320,134,Walk2[2]);
    DRAW_Other(224,134,2);

    DRAW_han(464,124,Walk1[4]);
    DRAW_han(424,124,Walk1[5]);
    DRAW_NUM1(368,92,Walk2[3]);
    DRAW_NUM1(344,92,Walk2[4]);
    DRAW_NUM1(320,92,Walk2[5]);
    DRAW_NUM1(296,92,Walk2[6]);
    DRAW_NUM1(272,92,Walk2[7]);
    DRAW_Other(224,92,2);

    DRAW_han(464,82,Walk1[6]);
    DRAW_han(424,82,Walk1[7]);
    DRAW_NUM1(368,50,Walk2[8]);
    DRAW_NUM1(344,50,Walk2[9]);
    DRAW_NUM1(320,50,Walk2[10]);
    DRAW_NUM1(296,50,Walk2[11]);
    DRAW_NUM1(272,50,Walk2[12]);
    DRAW_NUM1(248,50,Walk2[13]);
    DRAW_Other(224,50,2);

    results1[0]='S';
    results1[1]='T';
    results1[2]='A';
    results1[3]='R';
    results1[4]='T';
    results1[5]='W';
    results1[6]='A';
    results1[16]='A';
    results1[17]='A';
    results1[18]='A';
    results1[19]='A';
    results1[20]='A';
    results1[21]='E';
    results1[22]='N';
    results1[23]='D';

    step=0;
    timen=1;

    USB_setup(TRUE,TRUE);  // Init USB; if a USB host (PC) is present, connect*/

    interupt_flag=0;

    Init_UART2();
    UCA0IE |= UCRXIE;
    Init_ADC();
    ADC12CTL0 |= ADC12SC;//启动采样
    ADC12CTL0 |= ADC12ENC+ADC12ON;
    _EINT();
    int walk_flag;
    walk_flag=0;
    float walkbuf[35];
    unsigned int index_i;
    index_i=0;
	float m=0;
	uint16_t distance=0;
	float speed=0;
	uint16_t calories=0;
    Samax=0;
    Samin=3;
    inn=0;
    buttonsPressed=0;
    while (!(buttonsPressed & BUTTON_S4))
    {
    	if(interupt_flag==1){
    	interupt_flag=0;

    	inn++;

    	result0=ADC12MEM0;
    	result1=ADC12MEM1;
    	result2=ADC12MEM2;
//    	timen+=1;

        Ax=0.0008*(result0-2285.0000);
        Ay=0.000813*(result1-2670.0000);
        Az=0.00077*(result2-2150.0000);
    	Sa=sqrtf(Ax*Ax+Ay*Ay+Az*Az);

    	if(Sa>1.1){
    		walk_flag=1;
    	}

    	if(walk_flag==1){
    		walkbuf[index_i]=Sa;
    		index_i++;

    		if(Sa>Samax){Samax=Sa;}
    		if(Sa<Samin){Samin=Sa;}

    		if((Samax>1.05)&(Samin<0.96))
    		{
    			step=step+1;
    			walk_flag=0;
    			index_i=0;
    		    Samax=0;
    		    Samin=3;
    		}

    		if(index_i>35){
    			walk_flag=0;
    			index_i=0;
    		}
    	}

    	if(inn==25){
    	inn=0;
    	timen+=1;
    	int str0[6];
    	str0[0]   =   (int)((step)/100000);
    	str0[1]   =   (int)(((step)%100000)/10000);
    	str0[2]   =   (int)((step)%10000/1000);
    	str0[3]   =   (int)((step)%1000/100);
    	str0[4]   =   (int)((step)%100/10);
    	str0[5]   =   (int)((step)%10);

    	DRAW_NUM(340-16*0,236,str0[0],RED);
    	DRAW_NUM(340-16*1,236,str0[1],RED);
    	DRAW_NUM(340-16*2,236,str0[2],RED);
    	DRAW_NUM(340-16*3,236,str0[3],RED);
    	DRAW_NUM(340-16*4,236,str0[4],RED);
    	DRAW_NUM(340-16*5,236,str0[5],RED);

    	m=(((float)(step))*4.00000)/((float)(timen));
    	if(0<m<=2){
    		distance=step*(1.7/5);
    		speed=m*(1.7/5)/2;}
    	if(2<m<=3){
    		distance=step*(1.7/4);
    		speed=m*(1.7/4)/2;}
    	if(3<m<=4){
    		distance=step*(1.7/3);
    		speed=m*(1.7/3)/2;}
    	if(4<m<=5){
    		distance=step*(1.7/2);
    		speed=m*(1.7/2)/2;}
    	if(5<m<=6){
    		distance=step*(1.7/1.2);
    		speed=m*(1.7/1.2)/2;}
    	if(6<m<=8){
    		distance=step*(1.7/1);
    		speed=m*(1.7/1)/2;}
    	if(8<m){
    		distance=step*(1.7*1.2);
    		speed=m*(1.7*1.2)/2;}

    	calories=60*distance/1000*1.036;

        int str1[6];
        str1[0]   =   (int)(distance)/100000;
        str1[1]   =   (int)(distance)%100000/10000;
        str1[2]   =   (int)(distance)%10000/1000;
        str1[3]   =   (int)(distance)%1000/100;
        str1[4]   =   (int)(distance)%100/10;
        str1[5]   =   (int)(distance)%10;

    	DRAW_NUM(200-16*0,134,str1[0],RED);
    	DRAW_NUM(200-16*1,134,str1[1],RED);
    	DRAW_NUM(200-16*2,134,str1[2],RED);
    	DRAW_NUM(200-16*3,134,str1[3],RED);
    	DRAW_NUM(200-16*4,134,str1[4],RED);
    	DRAW_NUM(200-16*5,134,str1[5],RED);

        int str2[5];
        str2[0]   =   (int)(speed)/10;
        str2[1]   =   (int)(speed)%10;
        str2[2]   =   (int)(speed*10)%10;
        str2[3]   =   (int)(speed*100)%10;
        str2[4]   =   (int)(speed*1000)%10;

    	DRAW_NUM(200-16*0,92,str2[0],RED);
    	DRAW_NUM(200-16*1,92,str2[1],RED);
    	DRAW_Other(200-16*2,92,3);
    	DRAW_NUM(200-16*3,92,str2[2],RED);
    	DRAW_NUM(200-16*4,92,str2[3],RED);
    	DRAW_NUM(200-16*5,92,str2[4],RED);

        int str3[6];
        str3[0]   =   (int)(calories)/100000;
        str3[1]   =   (int)(calories)%100000/10000;
        str3[2]   =   (int)(calories)%10000/1000;
        str3[3]   =   (int)(calories)%1000/100;
        str3[4]   =   (int)(calories)%100/10;
        str3[5]   =   (int)(calories)%10;

    	DRAW_NUM(200-16*0,50,str3[0],RED);
    	DRAW_NUM(200-16*1,50,str3[1],RED);
    	DRAW_NUM(200-16*2,50,str3[2],RED);
    	DRAW_NUM(200-16*3,50,str3[3],RED);
    	DRAW_NUM(200-16*4,50,str3[4],RED);
    	DRAW_NUM(200-16*5,50,str3[5],RED);

    	results1[7]=(int)(step>>7);
        results1[8]=(int)(step&0x007F);
    	results1[9]=(int)(distance>>7);
        results1[10]=(int)(distance&0x007F);
    	results1[11]=(int)(((uint16_t)(speed*1000))>>7);
        results1[12]=(int)(((uint16_t)(speed*1000))&0x007F);
    	results1[13]=(int)(calories>>7);
        results1[14]=(int)(calories&0x007F);
        results1[15]=(int)(Sa*100);

        if(transmit_mode==1){
            bcUartInit();
            bcUartSend_char(results1, 24);//buf_bcuartToUsb
             }
        if(transmit_mode==2)
        {
            hidSendDataInBackground(results1, 48, HID0_INTFNUM,10000);

        }

        if(transmit_mode==3){
            	 int i;
            	 for(i=0;i<24;i++)
            	 {
                     UCA0TXBUF = results1[i];

                     while(!(UCTXIFG==(UCTXIFG & UCA0IFG))&&((UCA0STAT & UCBUSY)==UCBUSY));

                     int a,k;
                     for(a=0;a<10;a++)
                     {
                          for(k=0;k<80;k++);
                     }
            	 }
             }
    	}

        interupt_flag=0;

    	ADC12IE |= ADC12IE10;
        ADC12CTL0 |= ADC12SC;//启动采样
        ADC12CTL0 |= ADC12ENC+ADC12ON;
    	}

    }
}

void WALK2(int transmit_mode){
	USE_LCD();
	buttonsPressed=0;
	SPILCD_Clear(WHITE);

	_EINT();
    initClocks(20000000);   // Config clocks. MCLK=SMCLK=FLL=8MHz; ACLK=REFO=32kHz

    DRAW_han(464,310,Walk[0]);
    DRAW_han(424,310,Walk[1]);
    DRAW_Other(364,310-32,2);

    DRAW_han(464,268,Walk[1]);
    DRAW_han(424,268,Walk[2]);
    DRAW_Other(364,236,2);

    DRAW_han(464,208,Walk1[0]);
    DRAW_han(424,208,Walk1[1]);
    DRAW_Other(364,208-32,2);

    DRAW_han(464,166,Walk1[2]);
    DRAW_han(424,166,Walk1[3]);
    DRAW_NUM1(368,134,Walk2[0]);
    DRAW_NUM1(344,134,Walk2[1]);
    DRAW_NUM1(320,134,Walk2[2]);
    DRAW_Other(224,134,2);

    DRAW_han(464,124,Walk1[4]);
    DRAW_han(424,124,Walk1[5]);
    DRAW_NUM1(368,92,Walk2[3]);
    DRAW_NUM1(344,92,Walk2[4]);
    DRAW_NUM1(320,92,Walk2[5]);
    DRAW_NUM1(296,92,Walk2[6]);
    DRAW_NUM1(272,92,Walk2[7]);
    DRAW_Other(224,92,2);

    DRAW_han(464,82,Walk1[6]);
    DRAW_han(424,82,Walk1[7]);
    DRAW_NUM1(368,50,Walk2[8]);
    DRAW_NUM1(344,50,Walk2[9]);
    DRAW_NUM1(320,50,Walk2[10]);
    DRAW_NUM1(296,50,Walk2[11]);
    DRAW_NUM1(272,50,Walk2[12]);
    DRAW_NUM1(248,50,Walk2[13]);
    DRAW_Other(224,50,2);

    results1[0]='S';
    results1[1]='T';
    results1[2]='A';
    results1[3]='R';
    results1[4]='T';
    results1[5]='W';
    results1[6]='A';
    results1[16]='A';
    results1[17]='A';
    results1[18]='A';
    results1[19]='A';
    results1[20]='A';
    results1[21]='E';
    results1[22]='N';
    results1[23]='D';

    step=0;
    timen=1;

    USB_setup(TRUE,TRUE);  // Init USB; if a USB host (PC) is present, connect*/

    Init_UART2();
    UCA0IE |= UCRXIE;

    int walk_flag;
    walk_flag=0;
    float walkbuf[35];
    unsigned int index_i;
    index_i=0;
	float m=0;
	uint16_t distance=0;
	float speed=0;
	uint16_t calories=0;
    Samax=0;
    Samin=3;
    while (!(buttonsPressed & BUTTON_S4))
    {
    	if(accel_end==1){
    	int str0[6];
    	str0[0]   =   (int)((step)/100000);
    	str0[1]   =   (int)(((step)%100000)/10000);
    	str0[2]   =   (int)((step)%10000/1000);
    	str0[3]   =   (int)((step)%1000/100);
    	str0[4]   =   (int)((step)%100/10);
    	str0[5]   =   (int)((step)%10);

    	DRAW_NUM(340-16*0,236,str0[0],RED);
    	DRAW_NUM(340-16*1,236,str0[1],RED);
    	DRAW_NUM(340-16*2,236,str0[2],RED);
    	DRAW_NUM(340-16*3,236,str0[3],RED);
    	DRAW_NUM(340-16*4,236,str0[4],RED);
    	DRAW_NUM(340-16*5,236,str0[5],RED);

    	m=(((float)(step))*8.00000)/((float)(timen));
    	if(0<m<=2){
    		distance=step*(1.7/5);
    		speed=m*(1.7/5)/2;}
    	if(2<m<=3){
    		distance=step*(1.7/4);
    		speed=m*(1.7/4)/2;}
    	if(3<m<=4){
    		distance=step*(1.7/3);
    		speed=m*(1.7/3)/2;}
    	if(4<m<=5){
    		distance=step*(1.7/2);
    		speed=m*(1.7/2)/2;}
    	if(5<m<=6){
    		distance=step*(1.7/1.2);
    		speed=m*(1.7/1.2)/2;}
    	if(6<m<=8){
    		distance=step*(1.7/1);
    		speed=m*(1.7/1)/2;}
    	if(8<m){
    		distance=step*(1.7*1.2);
    		speed=m*(1.7*1.2)/2;}

    	calories=60*distance/1000*1.036;

        int str1[6];
        str1[0]   =   (int)(distance)/100000;
        str1[1]   =   (int)(distance)%100000/10000;
        str1[2]   =   (int)(distance)%10000/1000;
        str1[3]   =   (int)(distance)%1000/100;
        str1[4]   =   (int)(distance)%100/10;
        str1[5]   =   (int)(distance)%10;

    	DRAW_NUM(200-16*0,134,str1[0],RED);
    	DRAW_NUM(200-16*1,134,str1[1],RED);
    	DRAW_NUM(200-16*2,134,str1[2],RED);
    	DRAW_NUM(200-16*3,134,str1[3],RED);
    	DRAW_NUM(200-16*4,134,str1[4],RED);
    	DRAW_NUM(200-16*5,134,str1[5],RED);

        int str2[5];
        str2[0]   =   (int)(speed)/10;
        str2[1]   =   (int)(speed)%10;
        str2[2]   =   (int)(speed*10)%10;
        str2[3]   =   (int)(speed*100)%10;
        str2[4]   =   (int)(speed*1000)%10;

    	DRAW_NUM(200-16*0,92,str2[0],RED);
    	DRAW_NUM(200-16*1,92,str2[1],RED);
    	DRAW_Other(200-16*2,92,3);
    	DRAW_NUM(200-16*3,92,str2[2],RED);
    	DRAW_NUM(200-16*4,92,str2[3],RED);
    	DRAW_NUM(200-16*5,92,str2[4],RED);

        int str3[6];
        str3[0]   =   (int)(calories)/100000;
        str3[1]   =   (int)(calories)%100000/10000;
        str3[2]   =   (int)(calories)%10000/1000;
        str3[3]   =   (int)(calories)%1000/100;
        str3[4]   =   (int)(calories)%100/10;
        str3[5]   =   (int)(calories)%10;

    	DRAW_NUM(200-16*0,50,str3[0],RED);
    	DRAW_NUM(200-16*1,50,str3[1],RED);
    	DRAW_NUM(200-16*2,50,str3[2],RED);
    	DRAW_NUM(200-16*3,50,str3[3],RED);
    	DRAW_NUM(200-16*4,50,str3[4],RED);
    	DRAW_NUM(200-16*5,50,str3[5],RED);

        result0=(RxBuf1[1]<<8)+RxBuf1[2];
        result1=(RxBuf1[3]<<8)+RxBuf1[4];
        result2=(RxBuf1[5]<<8)+RxBuf1[6];
    	timen+=1;

    	Ax=-8.0899+0.00132*result0;
    	Ay=-8.4834+0.00136*result1;
    	Az=-8.8634+0.00145*result2;
    	Sa=sqrtf(Ax*Ax+Ay*Ay+Az*Az);

    	if(Sa>1.1){
    		walk_flag=1;
    	}

    	if(walk_flag==1){
    		walkbuf[index_i]=Sa;
    		index_i++;

    		if(Sa>Samax){Samax=Sa;}
    		if(Sa<Samin){Samin=Sa;}

    		if((Samax>1.05)&(Samin<0.96))
    		{
    			step=step+1;
    			walk_flag=0;
    			index_i=0;
    		    Samax=0;
    		    Samin=3;
    		}

    		if(index_i>5){
    			walk_flag=0;
    			index_i=0;
    		}
    	}

    	results1[7]=step>>7;
        results1[8]=step&0x007F;
    	results1[9]=distance>>7;
        results1[10]=distance&0x007F;
    	results1[11]=((uint16_t)(speed*1000))>>7;
        results1[12]=((uint16_t)(speed*1000))&0x007F;
    	results1[13]=calories>>7;
        results1[14]=calories&0x007F;
        results1[15]=(int)(Sa*100);

        if(transmit_mode==1){
            bcUartInit();
            bcUartSend_char(results1, 24);//buf_bcuartToUsb
             }
        if(transmit_mode==2)
        {
            hidSendDataInBackground(results1, 48, HID0_INTFNUM,10000);

        }

        Init_UART2();
        UCA0IE |= UCRXIE;
        accel_end=0;
    	}

    }
}

void ACCELMENU(int transmit_mode){
    SPILCD_Clear(WHITE);

    Show_MenuTheme();
//    Show_ACCELMenuMode(1);
    Show_ACCEL_Select(1);
    Show_Select();

    Init_UART2();
    UCA0IE |= UCRXIE;

    int as1=1;
    int i;
//    int accel_select;
    accel_select=0;

    buttonsPressed=0;

    while (!(buttonsPressed & BUTTON_S4))
    {
    	buttonsPressed = 0;
    	int ai;
    	for(ai=0;ai<30;ai++)
    	{
    		myDelay();
    	}
        if (buttonsPressed & BUTTON_S3)
        {
        	Show_ButtonS3();
        	if(as1==2){
        		as1=1;
        		//Show_ACCELMenuMode(as1);
        		Show_ACCEL_Select(as1);
        	}else{
        		if(as1==1){
        			as1=2;
        		    //Show_ACCELMenuMode(as1);
        			Show_ACCEL_Select(as1);
        		}
        	}
        	buttonsPressed=0;
        	Show_Select();
        }

        if (buttonsPressed & BUTTON_S2)
        {
        	Show_ButtonS2();
        	if(as1==2){
        		as1=1;
        		//Show_ACCELMenuMode(as1);
        		Show_ACCEL_Select(as1);
        	}else{
        		if(as1==1){
        			as1=2;
        		    //Show_ACCELMenuMode(as1);
        			Show_ACCEL_Select(as1);
        		}
        	}
        	buttonsPressed=0;
        	Show_Select();
        }

        if (buttonsPressed & BUTTON_S1)
        {
        	Show_ButtonS1();
        	if(as1==1){
        		//ACCEL(transmit_mode);
        		accel_select=1;
        	}
        	if(as1==2){
        		//WALK(transmit_mode);
        		accel_select=2;
        	}

        	ACCELNAME(transmit_mode);

        	as1=1;
        	buttonsPressed=0;
        	BUTTON_S4=0;
        	SPILCD_Clear(WHITE);

            Show_MenuTheme();
            Show_ACCEL_Select(1);
            Show_Select();
        }

        if(buttonsPressed & BUTTON_S4){
            Show_ButtonS4();
        }
    }
}

void ACCELNAME(int transmit_mode){
    SPILCD_Clear(WHITE);

    Show_MenuTheme();
    Show_ACCELMenuMode(1);
//    Show_ACCEL_Select(1);
    Show_Select();

    Init_UART2();
    UCA0IE |= UCRXIE;

    int as1=1;
    int i;
//    accel_select=0;

    buttonsPressed=0;

    while (!(buttonsPressed & BUTTON_S4))
    {
    	buttonsPressed = 0;
    	int ai;
    	for(ai=0;ai<30;ai++)
    	{
    		myDelay();
    	}
        if (buttonsPressed & BUTTON_S3)
        {
        	Show_ButtonS3();
        	if(as1==2){
        		as1=1;
        		Show_ACCELMenuMode(as1);
        		//Show_ACCEL_Select(as1);
        	}else{
        		if(as1==1){
        			as1=2;
        		    Show_ACCELMenuMode(as1);
        			//Show_ACCEL_Select(as1);
        		}
        	}
        	buttonsPressed=0;
        	Show_Select();
        }

        if (buttonsPressed & BUTTON_S2)
        {
        	Show_ButtonS2();
        	if(as1==2){
        		as1=1;
        		Show_ACCELMenuMode(as1);
        		//Show_ACCEL_Select(as1);
        	}else{
        		if(as1==1){
        			as1=2;
        		    Show_ACCELMenuMode(as1);
        			//Show_ACCEL_Select(as1);
        		}
        	}
        	buttonsPressed=0;
        	Show_Select();
        }

        if (buttonsPressed & BUTTON_S1)
        {
        	Show_ButtonS1();
        	if(as1==1){
        		if(accel_select==1)
        		{
        			ACCEL(transmit_mode);
        		}
        		if(accel_select==2)
        		{
        			ACCEL2(transmit_mode);
        		}
        		//ACCEL(transmit_mode);
        		//accel_select=1;
        	}
        	if(as1==2){
        		if(accel_select==1)
        		{
        			WALK(transmit_mode);
        		}
        		if(accel_select==2)
        		{
        			WALK2(transmit_mode);
        		}
        		//WALK(transmit_mode);
        		//accel_select=1;
        	}
        	as1=1;
        	buttonsPressed=0;
        	BUTTON_S4=0;
        	SPILCD_Clear(WHITE);

            Show_MenuTheme();
            Show_ACCELMenuMode(1);
            Show_Select();
        }

        if(buttonsPressed & BUTTON_S4){
            Show_ButtonS4();
        }
    }
}
